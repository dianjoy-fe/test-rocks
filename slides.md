# 关于启动测试的想法

Note: 这里记录一些关于测试的想法，有些可能会很快用上，有些可能将来会用上，有些可能不会用上。



## 人肉行为测试难以满足需求

1. 业务逻辑多而复杂，经常发生改动 A 触动 B 的情况
2. 很多代码质量不高需要重构，但是不敢做，怕影响使用
3. 出现问题依赖用户反馈，影响大家的体验和对我们的信任
4. 代码规模还没大到让人绝望的程度……



## 正确的测试姿势

我认为现代互联网公司不适合配置专职测试，并将产品交由他们测试，原因有下：

1. 测试人员很可能不了解业务
2. 反馈周期长，信息交互链长，信息噪音大
3. 开发人员都不喜欢 Bug，尤其是别人发现的 Bug


我认为正确的测试应该分为三部分。

1. 行为测试
2. 代码功能测试
3. 运维测试


### 行为测试

这部分测试由产品经理负责。他们负责产品的用户体验部分，自然应该负担起这个环节的测试工作。

1. 是否忠实还原设计稿和交互逻辑
2. 界面元素是否工作正常
3. 界面和交互设计是否合理高效
4. 其它可能未预料到的体验问题

Note: 我认为互联网公司的职人都应该有需求变动的心理准备，不用刻意追求需求不变。

在不同公司，因为分工，可能会细化到多个岗位，比如交互、UI等，总之，各岗位负责测试自己的部分。


### 代码功能测试

这部分测试由开发人员负责。他们需要针对功能模块进行细致的单元测试开发，这样将来的功能新增修改甚至重构才能放心大胆的进行。

1. 基础函数的单元测试
2. 类和方法的行为测试
3. 接口测试


### 运维测试

由开发人员配合运维进行测试。

1. 部署代码
2. 压力测试
3. 自动化测试和持续继承

长期来看，如果以后 Dev-Ops 能推广开，那么这部分其实也可以合并到上面开发测试中去。



## 我们接下来的步骤

就目前的环节来看，前端框架 [Tiger Prawn](https://github.com/Dianjoy/tiger-prawn) 的升级重构对以往业务产生的影响相对较小，所以暂时放一放，先做后端，主要是业务逻辑相关的测试。

后端测试顺利开展，测试覆盖率稳步提高之后，再着手前端测试覆盖。



## 后端测试

测试主要分为两部分：

1. 基础功能测试
2. 接口测试


### 基础功能测试

主要测试 [Lemon Grass](https://github.com/Dianjoy/lemon-grass)（后简称 LM）的基础功能，比如：

1. Utils
    1. SQLHelper
2. MVC
    1. Model
    2. Collection
    3. Controller
    4. Service


### 接口测试

定义接口的接受值、返回值，通过测试保证接口有效工作。

1. 创建接口配置文件
    1. 接受参数
    2. 返回值
    3. 权限
2. 配置有效的数据库和 Redis
3. 合理的分类，方便日后进行回归



## 流程变化

1. 小修改，需要对涉及的各环节进行回归测试
2. 功能开发，或变动较大，上线前需要进行全面测试（通常是晚上），通过后次日早晨上线
3. 发现 Bug 后，应及时制作测试用例，存入代码仓库



## 任务分配

### 肉山

1. 测试框架
2. 测试服务器
3. 基础组件的单元测试
4. 肉山负责的接口测试
5. 解决测试中产生的未预料到的问题


### 小胖 + 陈胜

1. 编写各自负责的接口测试


### Moment + 立柯

1. 行为测试，并补充测试用例
2. 前端界面测试



## 下一阶段

1. 自动化测试与持续集成
2. 前端测试覆盖


## FAQ